{"ast":null,"code":"import { FormGroup, FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/users-service.service\";\nimport * as i2 from \"ngx-cookie-service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/user-login-register.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction Compo2Component_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 7);\n    i0.ɵɵtext(1, \" *Escribe el ususario \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction Compo2Component_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 7);\n    i0.ɵɵtext(1, \" *Escribe la contrase\\u00F1a \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class Compo2Component {\n  constructor(serviceUser, cookieService, router, serviceUserLoginRegister) {\n    this.serviceUser = serviceUser;\n    this.cookieService = cookieService;\n    this.router = router;\n    this.serviceUserLoginRegister = serviceUserLoginRegister;\n    //Init vars\n    this.nombre = '';\n    this.role = '';\n    this.userResult = '';\n    this.message = '';\n    this.myForm = new FormGroup({\n      username: new FormControl('', [Validators.required]),\n      password: new FormControl('', [Validators.required])\n    });\n    // if (this.serviceUser = serviceUser.userData()) {\n    //   this.router.navigate(['/home']);\n    // }\n  }\n\n  submit() {\n    // Get cookie \n    this.cookieService.get('username');\n    this.cookieService.get('role');\n    this.serviceUserLoginRegister.validateLogin(this.myForm.value.username, this.myForm.value.password).subscribe(res => {\n      console.log('Respuesta en la componente: ');\n      console.log(typeof res);\n      console.log(localStorage.getItem('usuari'));\n      console.log(Object.keys(res.resultats).length);\n      if (res.value = '') {\n        this.message = 'Invalid username or password';\n        this.userResult = JSON.parse(JSON.stringify(res));\n      } else {\n        this.role = this.userResult.role;\n        this.router.navigate(['/esdeveniments']);\n      }\n    });\n    // // Redirects to esdeveniments\n    // if (this.role != '') {\n    //   this.router.navigate(['/esdeveniments']);\n    //   sessionStorage.removeItem('reloaded'); \n    // } \n  }\n}\n\nCompo2Component.ɵfac = function Compo2Component_Factory(t) {\n  return new (t || Compo2Component)(i0.ɵɵdirectiveInject(i1.UsersServiceService), i0.ɵɵdirectiveInject(i2.CookieService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.UserLoginRegisterService));\n};\nCompo2Component.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: Compo2Component,\n  selectors: [[\"app-compo2\"]],\n  decls: 17,\n  vars: 5,\n  consts: [[1, \"container\"], [1, \"title\", \"form\"], [1, \"form\", 3, \"formGroup\", \"ngSubmit\"], [\"type\", \"text\", \"formControlName\", \"username\", 1, \"form-control\"], [\"class\", \"red-font\", 4, \"ngIf\"], [\"type\", \"password\", \"formControlName\", \"password\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [1, \"red-font\"]],\n  template: function Compo2Component_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\", 1);\n      i0.ɵɵtext(2, \"Iniciar sesi\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"form\", 2);\n      i0.ɵɵlistener(\"ngSubmit\", function Compo2Component_Template_form_ngSubmit_3_listener() {\n        return ctx.submit();\n      });\n      i0.ɵɵelementStart(4, \"p\");\n      i0.ɵɵtext(5, \"Username: \");\n      i0.ɵɵelement(6, \"input\", 3);\n      i0.ɵɵtemplate(7, Compo2Component_span_7_Template, 2, 0, \"span\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"p\");\n      i0.ɵɵtext(9, \"Contrase\\u00F1a: \");\n      i0.ɵɵelement(10, \"input\", 5);\n      i0.ɵɵtemplate(11, Compo2Component_span_11_Template, 2, 0, \"span\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"button\", 6);\n      i0.ɵɵtext(13, \"Enviar\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"div\", 7);\n      i0.ɵɵtext(15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"div\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      let tmp_1_0;\n      let tmp_2_0;\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"formGroup\", ctx.myForm);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.myForm.get(\"username\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"required\"]) && ((tmp_1_0 = ctx.myForm.get(\"username\")) == null ? null : tmp_1_0.touched));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.myForm.get(\"password\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"required\"]) && ((tmp_2_0 = ctx.myForm.get(\"password\")) == null ? null : tmp_2_0.touched));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.myForm.invalid);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", ctx.message, \" \");\n    }\n  },\n  dependencies: [i5.NgIf, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.FormControlName],\n  styles: [\".inline[_ngcontent-%COMP%]\\n{\\n    display: inline-block;\\n}\\n\\nform.form[_ngcontent-%COMP%] {\\n    margin-left: 30%;\\n    margin-right: 30%;\\n}\\n\\n.title[_ngcontent-%COMP%] {\\n    margin-bottom: 20px;\\n    margin-top: 20px; \\n    text-align: center;  \\n}\\n.red-font[_ngcontent-%COMP%] {\\n    color: rgb(255, 112, 112);\\n}\\n.green-font[_ngcontent-%COMP%] {\\n    color: rgb(88, 212, 111)\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jb21wbzIvY29tcG8yLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0lBRUkscUJBQXFCO0FBQ3pCOztBQUVBO0lBQ0ksZ0JBQWdCO0lBQ2hCLGlCQUFpQjtBQUNyQjs7QUFFQTtJQUNJLG1CQUFtQjtJQUNuQixnQkFBZ0I7SUFDaEIsa0JBQWtCO0FBQ3RCO0FBQ0E7SUFDSSx5QkFBeUI7QUFDN0I7QUFDQTtJQUNJO0FBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyIuaW5saW5lXG57XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xufVxuXG5mb3JtLmZvcm0ge1xuICAgIG1hcmdpbi1sZWZ0OiAzMCU7XG4gICAgbWFyZ2luLXJpZ2h0OiAzMCU7XG59XG5cbi50aXRsZSB7XG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICBtYXJnaW4tdG9wOiAyMHB4OyBcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7ICBcbn1cbi5yZWQtZm9udCB7XG4gICAgY29sb3I6IHJnYigyNTUsIDExMiwgMTEyKTtcbn1cbi5ncmVlbi1mb250IHtcbiAgICBjb2xvcjogcmdiKDg4LCAyMTIsIDExMSlcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,SAAS,EAAEC,WAAW,EAAEC,UAAU,QAAQ,gBAAgB;;;;;;;;;;ICIvDC,+BACoE;IACpEA,sCACA;IAAAA,iBAAO;;;;;IAKPA,+BACoE;IAChEA,6CACJ;IAAAA,iBAAO;;;ADJnB,OAAM,MAAOC,eAAe;EAC1BC,YAAoBC,WAAgC,EAAWC,aAA4B,EAAUC,MAAc,EAAUC,wBAAkD;IAA3J,gBAAW,GAAXH,WAAW;IAAgC,kBAAa,GAAbC,aAAa;IAAyB,WAAM,GAANC,MAAM;IAAkB,6BAAwB,GAAxBC,wBAAwB;IAOrJ;IACA,WAAM,GAAQ,EAAE;IAChB,SAAI,GAAU,EAAE;IAChB,eAAU,GAAQ,EAAE;IACpB,YAAO,GAAQ,EAAE;IAEjB,WAAM,GAAG,IAAIT,SAAS,CAAC;MACrBU,QAAQ,EAAE,IAAIT,WAAW,CAAC,EAAE,EAAE,CAACC,UAAU,CAACS,QAAQ,CAAC,CAAC;MAEpDC,QAAQ,EAAE,IAAIX,WAAW,CAAC,EAAE,EAAE,CAACC,UAAU,CAACS,QAAQ,CAAC;KACpD,CAAC;IAfA;IACA;IACA;EACF;;EAcAE,MAAM;IACJ;IACA,IAAI,CAACN,aAAa,CAACO,GAAG,CAAC,UAAU,CAAC;IAClC,IAAI,CAACP,aAAa,CAACO,GAAG,CAAC,MAAM,CAAC;IAE9B,IAAI,CAACL,wBAAwB,CAACM,aAAa,CAAC,IAAI,CAACC,MAAM,CAACC,KAAK,CAACP,QAAQ,EAAE,IAAI,CAACM,MAAM,CAACC,KAAK,CAACL,QAAQ,CAAC,CAACM,SAAS,CAAEC,GAAG,IAAI;MACpHC,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;MAC3CD,OAAO,CAACC,GAAG,CAAC,OAAOF,GAAI,CAAC;MACxBC,OAAO,CAACC,GAAG,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC;MAC3CH,OAAO,CAACC,GAAG,CAACG,MAAM,CAACC,IAAI,CAACN,GAAG,CAACO,SAAS,CAAC,CAACC,MAAM,CAAC;MAC9C,IAAKR,GAAG,CAACF,KAAK,GAAG,EAAE,EAAE;QACnB,IAAI,CAACW,OAAO,GAAG,8BAA8B;QAC7C,IAAI,CAACC,UAAU,GAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACb,GAAG,CAAC,CAAC;OAChD,MAAK;QACJ,IAAI,CAACc,IAAI,GAAG,IAAI,CAACJ,UAAU,CAACI,IAAI;QAEhC,IAAI,CAACzB,MAAM,CAAC0B,QAAQ,CAAC,CAAC,gBAAgB,CAAC,CAAC;;IAG5C,CAAC,CAAC;IAEF;IACA;IACA;IACA;IAEA;EAEF;;;AAhDW9B,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;QAAfA,eAAe;EAAA+B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCZ5BpC,8BAAuB;MACKA,mCAAc;MAAAA,iBAAK;MAC3CA,+BAA+D;MAAtBA;QAAA,OAAYqC,YAAQ;MAAA,EAAC;MAC1DrC,yBAAG;MAAAA,0BACC;MAAAA,2BAAmE;MACnEA,kEAGO;MACXA,iBAAI;MAEJA,yBAAG;MAAAA,iCACC;MAAAA,4BAAuE;MACvEA,oEAGO;MACXA,iBAAI;MAEJA,kCAA0E;MAAAA,uBAAM;MAAAA,iBAAS;MAE7FA,+BAAsB;MAClBA,aACJ;MAAAA,iBAAM;MACNA,uBAEM;MACVA,iBAAM;;;;;MAzBkBA,eAAoB;MAApBA,sCAAoB;MAGRA,eAC0C;MAD1CA,wNAC0C;MAO1CA,eAC0C;MAD1CA,wNAC0C;MAKtCA,eAA2B;MAA3BA,6CAA2B;MAG3DA,eACJ;MADIA,4CACJ","names":["FormGroup","FormControl","Validators","i0","Compo2Component","constructor","serviceUser","cookieService","router","serviceUserLoginRegister","username","required","password","submit","get","validateLogin","myForm","value","subscribe","res","console","log","localStorage","getItem","Object","keys","resultats","length","message","userResult","JSON","parse","stringify","role","navigate","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/vic/app-uf4/src/app/components/compo2/compo2.component.ts","/home/vic/app-uf4/src/app/components/compo2/compo2.component.html"],"sourcesContent":["import { Component, OnInit }                          from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { UsersServiceService }                from 'src/app/services/users-service.service';\nimport { UserLoginRegisterService } from 'src/app/services/user-login-register.service';\nimport { CookieService } from 'ngx-cookie-service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-compo2',\n  styleUrls: ['./compo2.component.css'],\n  templateUrl: './compo2.component.html',\n})\nexport class Compo2Component {\n  constructor(private serviceUser: UsersServiceService,  private cookieService: CookieService, private router: Router, private serviceUserLoginRegister: UserLoginRegisterService) {\n\n    // if (this.serviceUser = serviceUser.userData()) {\n    //   this.router.navigate(['/home']);\n    // }\n  }\n\n  //Init vars\n  nombre: any = '';\n  role:   any = '';\n  userResult: any = '';\n  message: any = '';\n\n  myForm = new FormGroup({\n    username: new FormControl('', [Validators.required]),\n\n    password: new FormControl('', [Validators.required]),\n  });\n\n  submit(): void {\n    // Get cookie \n    this.cookieService.get('username');\n    this.cookieService.get('role')\n;\n    this.serviceUserLoginRegister.validateLogin(this.myForm.value.username, this.myForm.value.password).subscribe((res) => {\n      console.log('Respuesta en la componente: ');\n      console.log(typeof(res));\n      console.log(localStorage.getItem('usuari'));\n      console.log(Object.keys(res.resultats).length)\n      if ( res.value = '') {\n        this.message = 'Invalid username or password';\n        this.userResult=JSON.parse(JSON.stringify(res));\n      }else {\n        this.role = this.userResult.role;\n\n        this.router.navigate(['/esdeveniments']);\n      }\n\n    })\n\n    // // Redirects to esdeveniments\n    // if (this.role != '') {\n    //   this.router.navigate(['/esdeveniments']);\n    //   sessionStorage.removeItem('reloaded'); \n\n    // } \n\n  }\n  \n}\n","<div class=\"container\">\n    <h3 class=\"title form \">Iniciar sesión</h3> \n    <form  class=\"form\" [formGroup]=\"myForm\" (ngSubmit)=\"submit()\">\n        <p>Username:\n            <input class=\"form-control\" type=\"text\" formControlName=\"username\">\n            <span class=\"red-font\" *ngIf=\"this.myForm.get('username')?.errors?.['required'] && \n                                          this.myForm.get('username')?.touched\">\n            *Escribe el ususario\n            </span>\n        </p>\n\n        <p>Contraseña:\n            <input type=\"password\" class=\"form-control\" formControlName=\"password\">\n            <span class=\"red-font\" *ngIf=\"this.myForm.get('password')?.errors?.['required'] && \n                                          this.myForm.get('password')?.touched\">\n                *Escribe la contraseña\n            </span>\n        </p>\n\n        <button class=\"btn btn-primary\" [disabled]=\"myForm.invalid\" type=\"submit\">Enviar</button>\n    </form>\n    <div class=\"red-font\">\n        {{message}}\n    </div>\n    <div>\n        <!-- {{role}} -->\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}