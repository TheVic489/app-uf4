{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/users-service.service\";\nimport * as i2 from \"ngx-cookie-service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/list-events-service.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"ngx-pagination\";\nfunction EsdevenimentsComponent_tr_17_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function EsdevenimentsComponent_tr_17_button_14_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.deleteRow(ctx_r3));\n    });\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EsdevenimentsComponent_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 5);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 5);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 5);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 5);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 5);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 5)(12, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function EsdevenimentsComponent_tr_17_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.deleteRow(ctx_r5));\n    });\n    i0.ɵɵtext(13, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, EsdevenimentsComponent_tr_17_button_14_Template, 2, 0, \"button\", 7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const event_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r1.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r1.date);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r1.price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", event_r1.place, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.role == \"admin\" || ctx_r0.role == \"staff\");\n  }\n}\nconst _c0 = function (a1) {\n  return {\n    itemsPerPage: 10,\n    currentPage: a1\n  };\n};\nexport class EsdevenimentsComponent {\n  constructor(\n  // --> per injectar, serveis, cookies, router\n  serviceUser, cookieService, router, listeventService) {\n    this.serviceUser = serviceUser;\n    this.cookieService = cookieService;\n    this.router = router;\n    this.listeventService = listeventService;\n    this.page = 1;\n  }\n  ngOnInit() {\n    //Execute Handle session\n    this.handleSesison();\n    // \n    this.events = this.listeventService.getEvents();\n    //this.serviceUser.getUsers();\n    //Get Role\n    this.myRole = this.serviceUser.getCookieRole();\n  }\n  deleteRow(element) {\n    var row = element.parentNode.parentNode;\n    row.parentNode.removeChild(row);\n  }\n  handleSesison() {\n    /// HANDLE SESSION ///\n    // Reload page to show logout button\n    if (sessionStorage.getItem('reloaded') === null) {\n      sessionStorage.setItem('reloaded', 'true');\n      window.location.reload();\n    }\n    // If it's not logged, redirect to login\n    this.isLogged = this.serviceUser.checkCookieSession();\n    if (!this.isLogged) {\n      this.router.navigate(['/login']);\n    }\n    /////////////////////////////////////////////7\n  }\n}\n\nEsdevenimentsComponent.ɵfac = function EsdevenimentsComponent_Factory(t) {\n  return new (t || EsdevenimentsComponent)(i0.ɵɵdirectiveInject(i1.UsersServiceService), i0.ɵɵdirectiveInject(i2.CookieService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ListEventsServiceService));\n};\nEsdevenimentsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EsdevenimentsComponent,\n  selectors: [[\"app-esdeveniments\"]],\n  decls: 20,\n  vars: 6,\n  consts: [[1, \"title\"], [1, \"table\", \"table-striped\", \"table-hover\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [1, \"page\", 3, \"pageChange\"], [1, \"table-active\"], [\"id\", \"deleteButton\", 1, \"btn\", \"btn-secondary\", \"float-right\", 3, \"click\"], [\"class\", \"btn btn-secondary float-right\", \"id\", \"deleteButton\", 3, \"click\", 4, \"ngIf\"]],\n  template: function EsdevenimentsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵtext(1, \"Events List!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\")(3, \"table\", 1)(4, \"thead\")(5, \"tr\")(6, \"th\", 2);\n      i0.ɵɵtext(7, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"th\", 2);\n      i0.ɵɵtext(9, \"Type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"th\", 2);\n      i0.ɵɵtext(11, \"Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"th\", 2);\n      i0.ɵɵtext(13, \"Place\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"th\", 2);\n      i0.ɵɵtext(15, \"Price\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(16, \"tbody\");\n      i0.ɵɵtemplate(17, EsdevenimentsComponent_tr_17_Template, 15, 6, \"tr\", 3);\n      i0.ɵɵpipe(18, \"paginate\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(19, \"pagination-controls\", 4);\n      i0.ɵɵlistener(\"pageChange\", function EsdevenimentsComponent_Template_pagination_controls_pageChange_19_listener($event) {\n        return ctx.page = $event;\n      });\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(18, 1, ctx.events, i0.ɵɵpureFunction1(4, _c0, ctx.page)));\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.PaginationControlsComponent, i6.PaginatePipe],\n  styles: [\".title[_ngcontent-%COMP%] {\\n    margin-bottom: 20px;\\n    margin-top: 20px; \\n    text-align: center;  \\n}\\n.table-div[_ngcontent-%COMP%] {\\n    margin-right: 30px;\\n    margin-left: 30px;\\n}\\n.page[_ngcontent-%COMP%] {\\n    text-align: center;\\n}\\n.float-right[_ngcontent-%COMP%] {\\n    float: right;\\n    margin-right: 100px;\\n\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZXNkZXZlbmltZW50cy9lc2RldmVuaW1lbnRzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxtQkFBbUI7SUFDbkIsZ0JBQWdCO0lBQ2hCLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksa0JBQWtCO0lBQ2xCLGlCQUFpQjtBQUNyQjtBQUNBO0lBQ0ksa0JBQWtCO0FBQ3RCO0FBQ0E7SUFDSSxZQUFZO0lBQ1osbUJBQW1COztBQUV2QiIsInNvdXJjZXNDb250ZW50IjpbIi50aXRsZSB7XG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICBtYXJnaW4tdG9wOiAyMHB4OyBcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7ICBcbn1cbi50YWJsZS1kaXYge1xuICAgIG1hcmdpbi1yaWdodDogMzBweDtcbiAgICBtYXJnaW4tbGVmdDogMzBweDtcbn1cbi5wYWdlIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG4uZmxvYXQtcmlnaHQge1xuICAgIGZsb2F0OiByaWdodDtcbiAgICBtYXJnaW4tcmlnaHQ6IDEwMHB4O1xuXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;IAsBgBA,iCAAoI;IAA1BA;MAAAA;MAAA;MAAA,OAASA,uCAAe;IAAA,EAAC;IAACA,sBAAM;IAAAA,iBAAS;;;;;;IAT3JA,0BAAoF;IACrDA,YAAgB;IAAAA,iBAAK;IAChDA,6BAA2B;IAAAA,YAAgB;IAAAA,iBAAK;IAChDA,6BAA2B;IAAAA,YAAgB;IAAAA,iBAAK;IAChDA,6BAA2B;IAAAA,YAAiB;IAAAA,iBAAK;IACjDA,6BAA2B;IAAAA,aAC3B;IAAAA,iBAAK;IACLA,8BAAyB;IAC2CA;MAAAA;MAAA;MAAA,OAASA,uCAAe;IAAA,EAAC;IAACA,uBAAM;IAAAA,iBAAS;IACzGA,qFAAmJ;IAEvJA,iBAAK;;;;;IAVsBA,eAAgB;IAAhBA,mCAAgB;IAChBA,eAAgB;IAAhBA,mCAAgB;IAChBA,eAAgB;IAAhBA,mCAAgB;IAChBA,eAAiB;IAAjBA,oCAAiB;IACjBA,eAC3B;IAD2BA,8CAC3B;IAGaA,eAAuC;IAAvCA,uEAAuC;;;;;;;;;ACThE,OAAM,MAAOC,sBAAsB;EACjCC;EAAa;EACHC,WAAgC,EAChCC,aAA4B,EAC5BC,MAAc,EACdC,gBAA0C;IAH1C,gBAAW,GAAXH,WAAW;IACX,kBAAa,GAAbC,aAAa;IACb,WAAM,GAANC,MAAM;IACN,qBAAgB,GAAhBC,gBAAgB;IAM1B,SAAI,GAAgB,CAAC;EALlB;EAQHC,QAAQ;IACN;IACA,IAAI,CAACC,aAAa,EAAE;IACpB;IACA,IAAI,CAACC,MAAM,GAAG,IAAI,CAACH,gBAAgB,CAACI,SAAS,EAAE;IAC/C;IAEA;IACA,IAAI,CAACC,MAAM,GAAG,IAAI,CAACR,WAAW,CAACS,aAAa,EAAE;EAChD;EAEAC,SAAS,CAACC,OAAY;IACpB,IAAIC,GAAG,GAAGD,OAAO,CAACE,UAAU,CAACA,UAAU;IACvCD,GAAG,CAACC,UAAU,CAACC,WAAW,CAACF,GAAG,CAAC;EACjC;EACAP,aAAa;IACX;IACA;IACA,IAAIU,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC,KAAK,IAAI,EAAE;MAC/CD,cAAc,CAACE,OAAO,CAAC,UAAU,EAAE,MAAM,CAAC;MAC1CC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;;IAE1B;IACA,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACrB,WAAW,CAACsB,kBAAkB,EAAE;IACrD,IAAI,CAAC,IAAI,CAACD,QAAQ,EAAE;MAClB,IAAI,CAACnB,MAAM,CAACqB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;;IAElC;EACF;;;AA1CWzB,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;QAAtBA,sBAAsB;EAAA0B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDbnC/B,6BAAkB;MAAAA,4BAAY;MAAAA,iBAAK;MACnCA,2BAAK;MAIwBA,oBAAI;MAAAA,iBAAK;MAC1BA,6BAAiB;MAAAA,oBAAI;MAAAA,iBAAK;MAC1BA,8BAAiB;MAAAA,qBAAI;MAAAA,iBAAK;MAC1BA,8BAAiB;MAAAA,sBAAK;MAAAA,iBAAK;MAC3BA,8BAAiB;MAAAA,sBAAK;MAAAA,iBAAK;MAGnCA,8BAAO;MACHA,wEAYK;;MACLA,iBAAQ;MAGhBA,+CAA+D;MAA7BA;QAAA;MAAA,EAA4B;MAACA,iBAAsB;;;MAhBvDA,gBAA4D;MAA5DA,iGAA4D","names":["i0","EsdevenimentsComponent","constructor","serviceUser","cookieService","router","listeventService","ngOnInit","handleSesison","events","getEvents","myRole","getCookieRole","deleteRow","element","row","parentNode","removeChild","sessionStorage","getItem","setItem","window","location","reload","isLogged","checkCookieSession","navigate","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/vic/dawbio2/m06-client/UF3/my-app-2/src/app/esdeveniments/esdeveniments.component.html","/home/vic/dawbio2/m06-client/UF3/my-app-2/src/app/esdeveniments/esdeveniments.component.ts"],"sourcesContent":["<h1 class=\"title\">Events List!</h1>\n<div>\n<table class=\"table table-striped table-hover\">\n    <thead>\n        <tr>\n            <th scope=\"col\" >Name</th>\n            <th scope=\"col\" >Type</th>\n            <th scope=\"col\" >Date</th>\n            <th scope=\"col\" >Place</th>\n            <th scope=\"col\" >Price</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr *ngFor=\"let event of events | paginate: { itemsPerPage: 10, currentPage: page}\">\n            <td  class=\"table-active\" >{{ event.name }}</td>\n            <td  class=\"table-active\" >{{ event.type }}</td>\n            <td  class=\"table-active\" >{{ event.date }}</td>\n            <td  class=\"table-active\" >{{ event.price }}</td>\n            <td  class=\"table-active\" >{{ event.place }}\n            </td>\n            <td class=\"table-active\">\n                <button class=\"btn btn-secondary float-right\" id=\"deleteButton\" (click)=\"deleteRow(this)\">Delete</button>\n                <button *ngIf=\"role == 'admin'|| role == 'staff'\" class=\"btn btn-secondary float-right\" id=\"deleteButton\" (click)=\"deleteRow(this)\">Delete</button>\n\n            </td>\n        </tr>\n        </tbody>\n    </table>\n</div>\n<pagination-controls class=\"page\" (pageChange)=\"page = $event\"></pagination-controls>","import { Component, OnInit }   from '@angular/core';\nimport { UsersServiceService } from 'src/app/services/users-service.service';\nimport { ListEventsServiceService } from 'src/app/services/list-events-service.service';\nimport { CookieService }       from 'ngx-cookie-service';\nimport { Router } from '@angular/router';\nimport { Event }  from '../model/Esdeveniments';\n\n\n@Component({\n  selector: 'app-esdeveniments',\n  templateUrl: './esdeveniments.component.html',\n  styleUrls: ['./esdeveniments.component.css'],\n})\nexport class EsdevenimentsComponent implements OnInit {\n  constructor( // --> per injectar, serveis, cookies, router\n    private serviceUser: UsersServiceService,\n    private cookieService: CookieService,\n    private router: Router,\n    private listeventService: ListEventsServiceService\n  ) {}\n  \n  // Init Variables\n  isLogged!: boolean;\n  events!:   Event[];\n  page:      number = 1;\n  myRole!:   string;\n  \n  ngOnInit() {\n    //Execute Handle session\n    this.handleSesison();\n    // \n    this.events = this.listeventService.getEvents()\n    //this.serviceUser.getUsers();\n\n    //Get Role\n    this.myRole = this.serviceUser.getCookieRole();\n  }\n  \n  deleteRow(element: any): void {\n    var row = element.parentNode.parentNode;\n    row.parentNode.removeChild(row);\n  }\n  handleSesison(){\n    /// HANDLE SESSION ///\n    // Reload page to show logout button\n    if (sessionStorage.getItem('reloaded') === null) {\n      sessionStorage.setItem('reloaded', 'true');\n      window.location.reload();\n    }\n    // If it's not logged, redirect to login\n    this.isLogged = this.serviceUser.checkCookieSession();\n    if (!this.isLogged) { \n      this.router.navigate(['/login']);\n    }\n    /////////////////////////////////////////////7\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}