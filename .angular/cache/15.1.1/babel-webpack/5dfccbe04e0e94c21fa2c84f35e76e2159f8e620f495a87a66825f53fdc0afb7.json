{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/users-service.service\";\nimport * as i2 from \"ngx-cookie-service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/list-events-service.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"ngx-pagination\";\nfunction EsdevenimentsComponent_tr_21_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 13);\n    i0.ɵɵtext(1, \"Buy ticket\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EsdevenimentsComponent_tr_21_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function EsdevenimentsComponent_tr_21_button_13_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const event_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.deleteRow(event_r1));\n    });\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EsdevenimentsComponent_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 10);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 10);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 10);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 10);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 10);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 10);\n    i0.ɵɵtemplate(12, EsdevenimentsComponent_tr_21_button_12_Template, 2, 0, \"button\", 11);\n    i0.ɵɵtemplate(13, EsdevenimentsComponent_tr_21_button_13_Template, 2, 0, \"button\", 12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const event_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r1.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r1.date);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r1.price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", event_r1.place, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.myRole == \"comprador\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.myRole == \"admin\" || ctx_r0.myRole == \"staff\");\n  }\n}\nconst _c0 = function (a1) {\n  return {\n    itemsPerPage: 10,\n    currentPage: a1\n  };\n};\nexport class EsdevenimentsComponent {\n  constructor(\n  // --> per injectar, serveis, cookies, router\n  serviceUser, cookieService, router, listeventService) {\n    this.serviceUser = serviceUser;\n    this.cookieService = cookieService;\n    this.router = router;\n    this.listeventService = listeventService;\n    this.page = 1;\n  }\n  ngOnInit() {\n    // Execute Handle session\n    this.handleSesison();\n    // Get events list\n    this.events = this.listeventService.getEvents();\n    //Get Role\n    this.myRole = this.serviceUser.getCookieRole();\n  }\n  deleteRow(element) {\n    this.events = this.events.filter(delEvent => delEvent != element);\n  }\n  handleSesison() {\n    /// HANDLE SESSION ///\n    // Reload page to show logout button\n    if (sessionStorage.getItem('reloaded') === null) {\n      sessionStorage.setItem('reloaded', 'true');\n      window.location.reload();\n    }\n    // If it's not logged, redirect to login\n    this.isLogged = this.serviceUser.checkCookieSession();\n    if (!this.isLogged) {\n      this.router.navigate(['/login']);\n    }\n    /////////////////////////////////////////////7\n  }\n}\n\nEsdevenimentsComponent.ɵfac = function EsdevenimentsComponent_Factory(t) {\n  return new (t || EsdevenimentsComponent)(i0.ɵɵdirectiveInject(i1.UsersServiceService), i0.ɵɵdirectiveInject(i2.CookieService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ListEventsServiceService));\n};\nEsdevenimentsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EsdevenimentsComponent,\n  selectors: [[\"app-esdeveniments\"]],\n  decls: 28,\n  vars: 6,\n  consts: [[1, \"title\"], [1, \"d-flex\", \"form\"], [\"type\", \"search\", \"placeholder\", \"Search\", 1, \"form-control\", \"me-sm-2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-secondary\", \"my-2\", \"my-sm-0\"], [1, \"table\", \"table-striped\", \"table-hover\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [1, \"page\"], [1, \"btn\", \"btn-dark\", 3, \"pageChange\"], [1, \"abajo-derecha\"], [1, \"table-active\"], [\"class\", \"btn btn-success float-right\", \"i\", \"\", \"d\", \"buyButton\", 4, \"ngIf\"], [\"class\", \"btn btn-secondary float-right\", \"id\", \"deleteButton\", 3, \"click\", 4, \"ngIf\"], [\"i\", \"\", \"d\", \"buyButton\", 1, \"btn\", \"btn-success\", \"float-right\"], [\"id\", \"deleteButton\", 1, \"btn\", \"btn-secondary\", \"float-right\", 3, \"click\"]],\n  template: function EsdevenimentsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵtext(1, \"Events List!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 1);\n      i0.ɵɵelement(3, \"input\", 2);\n      i0.ɵɵelementStart(4, \"button\", 3);\n      i0.ɵɵtext(5, \"Search\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"div\")(7, \"table\", 4)(8, \"thead\")(9, \"tr\")(10, \"th\", 5);\n      i0.ɵɵtext(11, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"th\", 5);\n      i0.ɵɵtext(13, \"Type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"th\", 5);\n      i0.ɵɵtext(15, \"Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"th\", 5);\n      i0.ɵɵtext(17, \"Place\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"th\", 5);\n      i0.ɵɵtext(19, \"Price\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(20, \"tbody\");\n      i0.ɵɵtemplate(21, EsdevenimentsComponent_tr_21_Template, 14, 7, \"tr\", 6);\n      i0.ɵɵpipe(22, \"paginate\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(23, \"div\", 7)(24, \"pagination-controls\", 8);\n      i0.ɵɵlistener(\"pageChange\", function EsdevenimentsComponent_Template_pagination_controls_pageChange_24_listener($event) {\n        return ctx.page = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(25, \"div\", 9)(26, \"b\");\n      i0.ɵɵtext(27, \"Total number of events: \");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(21);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(22, 1, ctx.events, i0.ɵɵpureFunction1(4, _c0, ctx.page)));\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.NgForm, i7.PaginationControlsComponent, i7.PaginatePipe],\n  styles: [\".title[_ngcontent-%COMP%] {\\n    margin-bottom: 20px;\\n    margin-top: 20px; \\n    text-align: center;  \\n}\\n.table-div[_ngcontent-%COMP%] {\\n    margin-right: 30px;\\n    margin-left: 30px;\\n}\\n.page[_ngcontent-%COMP%] {\\n    text-align: center;\\n\\n}\\nb[_ngcontent-%COMP%] {\\n    font-size: 24px;\\n}\\n\\n.float-right[_ngcontent-%COMP%] {\\n    float: right;\\n    margin-right: 100px;\\n\\n}\\n.abajo-derecha[_ngcontent-%COMP%] {\\n    text-align: right;\\n    float: right;\\n    position: absolute;\\n}\\nform.form[_ngcontent-%COMP%] {\\n    margin-left: 30%;\\n    margin-right: 30%;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZXNkZXZlbmltZW50cy9lc2RldmVuaW1lbnRzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxtQkFBbUI7SUFDbkIsZ0JBQWdCO0lBQ2hCLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksa0JBQWtCO0lBQ2xCLGlCQUFpQjtBQUNyQjtBQUNBO0lBQ0ksa0JBQWtCOztBQUV0QjtBQUNBO0lBQ0ksZUFBZTtBQUNuQjs7QUFFQTtJQUNJLFlBQVk7SUFDWixtQkFBbUI7O0FBRXZCO0FBQ0E7SUFDSSxpQkFBaUI7SUFDakIsWUFBWTtJQUNaLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksZ0JBQWdCO0lBQ2hCLGlCQUFpQjtBQUNyQiIsInNvdXJjZXNDb250ZW50IjpbIi50aXRsZSB7XG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICBtYXJnaW4tdG9wOiAyMHB4OyBcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7ICBcbn1cbi50YWJsZS1kaXYge1xuICAgIG1hcmdpbi1yaWdodDogMzBweDtcbiAgICBtYXJnaW4tbGVmdDogMzBweDtcbn1cbi5wYWdlIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG5cbn1cbmIge1xuICAgIGZvbnQtc2l6ZTogMjRweDtcbn1cblxuLmZsb2F0LXJpZ2h0IHtcbiAgICBmbG9hdDogcmlnaHQ7XG4gICAgbWFyZ2luLXJpZ2h0OiAxMDBweDtcblxufVxuLmFiYWpvLWRlcmVjaGEge1xuICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgIGZsb2F0OiByaWdodDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG59XG5mb3JtLmZvcm0ge1xuICAgIG1hcmdpbi1sZWZ0OiAzMCU7XG4gICAgbWFyZ2luLXJpZ2h0OiAzMCU7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;IA2BgBA,kCAA2F;IAAAA,0BAAU;IAAAA,iBAAS;;;;;;IAC9GA,kCAAyI;IAA3BA;MAAAA;MAAA;MAAA;MAAA,OAASA,yCAAgB;IAAA,EAAC;IAACA,sBAAM;IAAAA,iBAAS;;;;;IAThKA,0BAAoF;IACrDA,YAAgB;IAAAA,iBAAK;IAChDA,8BAA2B;IAAAA,YAAgB;IAAAA,iBAAK;IAChDA,8BAA2B;IAAAA,YAAgB;IAAAA,iBAAK;IAChDA,8BAA2B;IAAAA,YAAiB;IAAAA,iBAAK;IACjDA,8BAA2B;IAAAA,aAC3B;IAAAA,iBAAK;IACLA,+BAAyB;IACrBA,sFAA8G;IAC9GA,sFAAwJ;IAE5JA,iBAAK;;;;;IAVsBA,eAAgB;IAAhBA,mCAAgB;IAChBA,eAAgB;IAAhBA,mCAAgB;IAChBA,eAAgB;IAAhBA,mCAAgB;IAChBA,eAAiB;IAAjBA,oCAAiB;IACjBA,eAC3B;IAD2BA,8CAC3B;IAEaA,eAA2B;IAA3BA,mDAA2B;IAC3BA,eAA2C;IAA3CA,2EAA2C;;;;;;;;;ACfpE,OAAM,MAAOC,sBAAsB;EACjCC;EAAa;EACHC,WAAgC,EAChCC,aAA4B,EAC5BC,MAAc,EACdC,gBAA0C;IAH1C,gBAAW,GAAXH,WAAW;IACX,kBAAa,GAAbC,aAAa;IACb,WAAM,GAANC,MAAM;IACN,qBAAgB,GAAhBC,gBAAgB;IAM1B,SAAI,GAAgB,CAAC;EALlB;EAQHC,QAAQ;IACN;IACA,IAAI,CAACC,aAAa,EAAE;IAEpB;IACA,IAAI,CAACC,MAAM,GAAG,IAAI,CAACH,gBAAgB,CAACI,SAAS,EAAE;IAE/C;IACA,IAAI,CAACC,MAAM,GAAG,IAAI,CAACR,WAAW,CAACS,aAAa,EAAE;EAEhD;EAEAC,SAAS,CAACC,OAAY;IACpB,IAAI,CAACL,MAAM,GAAG,IAAI,CAACA,MAAM,CAACM,MAAM,CAACC,QAAQ,IAAIA,QAAQ,IAAIF,OAAO,CAAC;EACnE;EACAN,aAAa;IACX;IACA;IACA,IAAIS,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC,KAAK,IAAI,EAAE;MAC/CD,cAAc,CAACE,OAAO,CAAC,UAAU,EAAE,MAAM,CAAC;MAC1CC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;;IAE1B;IACA,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACpB,WAAW,CAACqB,kBAAkB,EAAE;IACrD,IAAI,CAAC,IAAI,CAACD,QAAQ,EAAE;MAClB,IAAI,CAAClB,MAAM,CAACoB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;;IAElC;EACF;;;AA1CWxB,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;QAAtBA,sBAAsB;EAAAyB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDbnC9B,6BAAkB;MAAAA,4BAAY;MAAAA,iBAAK;MACnCA,+BAA0B;MAEtBA,2BAAuE;MACvEA,iCAA6D;MAAAA,sBAAM;MAAAA,iBAAS;MAGhFA,2BAAK;MAIwBA,qBAAI;MAAAA,iBAAK;MAC1BA,8BAAiB;MAAAA,qBAAI;MAAAA,iBAAK;MAC1BA,8BAAiB;MAAAA,qBAAI;MAAAA,iBAAK;MAC1BA,8BAAiB;MAAAA,sBAAK;MAAAA,iBAAK;MAC3BA,8BAAiB;MAAAA,sBAAK;MAAAA,iBAAK;MAGnCA,8BAAO;MACHA,wEAYK;;MACLA,iBAAQ;MAGhBA,+BAAkB;MACwBA;QAAA;MAAA,EAA4B;MAACA,iBAAsB;MAE7FA,+BAA2B;MACxBA,yCAAwB;MAAAA,iBAAI;;;MApBDA,gBAA4D;MAA5DA,iGAA4D","names":["i0","EsdevenimentsComponent","constructor","serviceUser","cookieService","router","listeventService","ngOnInit","handleSesison","events","getEvents","myRole","getCookieRole","deleteRow","element","filter","delEvent","sessionStorage","getItem","setItem","window","location","reload","isLogged","checkCookieSession","navigate","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/vic/dawbio2/m06-client/UF3/my-app-2/src/app/esdeveniments/esdeveniments.component.html","/home/vic/dawbio2/m06-client/UF3/my-app-2/src/app/esdeveniments/esdeveniments.component.ts"],"sourcesContent":["<h1 class=\"title\">Events List!</h1>\n<form class=\"d-flex form\">\n\n    <input class=\"form-control me-sm-2\" type=\"search\" placeholder=\"Search\">\n    <button class=\"btn btn-secondary my-2 my-sm-0\" type=\"submit\">Search</button>\n    \n  </form>\n<div>\n<table class=\"table table-striped table-hover\">\n    <thead>\n        <tr>\n            <th scope=\"col\" >Name</th>\n            <th scope=\"col\" >Type</th>\n            <th scope=\"col\" >Date</th>\n            <th scope=\"col\" >Place</th>\n            <th scope=\"col\" >Price</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr *ngFor=\"let event of events | paginate: { itemsPerPage: 10, currentPage: page}\">\n            <td  class=\"table-active\" >{{ event.name }}</td>\n            <td  class=\"table-active\" >{{ event.type }}</td>\n            <td  class=\"table-active\" >{{ event.date }}</td>\n            <td  class=\"table-active\" >{{ event.price }}</td>\n            <td  class=\"table-active\" >{{ event.place }}\n            </td>\n            <td class=\"table-active\">\n                <button *ngIf=\"myRole == 'comprador'\" class=\"btn btn-success float-right\" i d=\"buyButton\" >Buy ticket</button>\n                <button *ngIf=\"myRole == 'admin'|| myRole == 'staff'\" class=\"btn btn-secondary float-right\" id=\"deleteButton\" (click)=\"deleteRow(event)\">Delete</button>\n\n            </td>\n        </tr>\n        </tbody>\n    </table>\n</div>\n<div class=\"page\">\n<pagination-controls class=\"btn btn-dark\" (pageChange)=\"page = $event\"></pagination-controls>\n</div>\n<div class=\"abajo-derecha\">\n<b>Total number of events: </b>\n</div>","import { Component, OnInit }   from '@angular/core';\nimport { UsersServiceService } from 'src/app/services/users-service.service';\nimport { ListEventsServiceService } from 'src/app/services/list-events-service.service';\nimport { CookieService }       from 'ngx-cookie-service';\nimport { Router } from '@angular/router';\nimport { Event }  from '../model/Esdeveniments';\n\n\n@Component({\n  selector: 'app-esdeveniments',\n  templateUrl: './esdeveniments.component.html',\n  styleUrls: ['./esdeveniments.component.css'],\n})\nexport class EsdevenimentsComponent implements OnInit {\n  constructor( // --> per injectar, serveis, cookies, router\n    private serviceUser: UsersServiceService,\n    private cookieService: CookieService,\n    private router: Router,\n    private listeventService: ListEventsServiceService\n  ) {}\n  \n  // Init Variables\n  isLogged!: boolean;\n  events!:   Event[];\n  page:      number = 1;\n  myRole!:   string;\n  \n  ngOnInit() {\n    // Execute Handle session\n    this.handleSesison();\n\n    // Get events list\n    this.events = this.listeventService.getEvents()\n\n    //Get Role\n    this.myRole = this.serviceUser.getCookieRole();\n\n  }\n  \n  deleteRow(element: any): void {\n    this.events = this.events.filter(delEvent => delEvent != element)    \n  }\n  handleSesison(){\n    /// HANDLE SESSION ///\n    // Reload page to show logout button\n    if (sessionStorage.getItem('reloaded') === null) {\n      sessionStorage.setItem('reloaded', 'true');\n      window.location.reload();\n    }\n    // If it's not logged, redirect to login\n    this.isLogged = this.serviceUser.checkCookieSession();\n    if (!this.isLogged) { \n      this.router.navigate(['/login']);\n    }\n    /////////////////////////////////////////////7\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}