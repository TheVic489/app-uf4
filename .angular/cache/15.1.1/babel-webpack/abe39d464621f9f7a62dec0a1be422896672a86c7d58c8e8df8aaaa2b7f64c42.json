{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/users-service.service\";\nimport * as i2 from \"ngx-cookie-service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/list-events-service.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"ngx-pagination\";\nfunction EsdevenimentsComponent_tr_34_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 20);\n    i0.ɵɵtext(1, \"Buy ticket\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EsdevenimentsComponent_tr_34_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function EsdevenimentsComponent_tr_34_button_13_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const event_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.deleteRow(event_r3));\n    });\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EsdevenimentsComponent_tr_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 17);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 17);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 17);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 17);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 17);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 17);\n    i0.ɵɵtemplate(12, EsdevenimentsComponent_tr_34_button_12_Template, 2, 0, \"button\", 18);\n    i0.ɵɵtemplate(13, EsdevenimentsComponent_tr_34_button_13_Template, 2, 0, \"button\", 19);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const event_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r3.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r3.date);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", event_r3.price, \" \\u20AC\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", event_r3.place, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.myRole == \"comprador\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.myRole == \"admin\" || ctx_r0.myRole == \"staff\");\n  }\n}\nfunction EsdevenimentsComponent_b_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"b\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Total number of events: \", ctx_r1.filterEvents.length, \" \");\n  }\n}\nfunction EsdevenimentsComponent_b_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"b\");\n    i0.ɵɵtext(1, \"No events found \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    itemsPerPage: a0,\n    currentPage: a1\n  };\n};\n// Comoponente de los Eventos\nexport class EsdevenimentsComponent {\n  constructor(\n  // --> per injectar, serveis, cookies, router\n  serviceUser, cookieService, router, listeventService) {\n    this.serviceUser = serviceUser;\n    this.cookieService = cookieService;\n    this.router = router;\n    this.listeventService = listeventService;\n    this.page = 1;\n  }\n  ngOnInit() {\n    // Execute Handle session\n    this.handleSesison();\n    // Get events list\n    this.events = this.listeventService.getEvents();\n    //Get Role\n    this.myRole = this.serviceUser.getCookieRole();\n    this.itXpage = 10;\n    this.filterByName = \"\";\n    this.filterByPrice = 100;\n    this.filterEvents = this.events;\n  }\n  // Deletes row for button\n  deleteRow(element) {\n    this.filterEvents = this.filterEvents.filter(delEvent => delEvent != element);\n  }\n  filter() {\n    this.filterEvents = this.events.filter(value => {\n      if (value.name.indexOf(this.filterByName) != -1) {\n        if (value.price <= this.filterByPrice) return true;\n      }\n      return false;\n    });\n  }\n  handleSesison() {\n    /// HANDLE SESSION ///\n    // Reload page to show logout button\n    if (sessionStorage.getItem('reloaded') === null) {\n      sessionStorage.setItem('reloaded', 'true');\n      window.location.reload();\n    }\n    // If it's not logged, redirect to login\n    this.isLogged = this.serviceUser.checkCookieSession();\n    if (!this.isLogged) {\n      this.router.navigate(['/login']);\n    }\n  }\n}\nEsdevenimentsComponent.ɵfac = function EsdevenimentsComponent_Factory(t) {\n  return new (t || EsdevenimentsComponent)(i0.ɵɵdirectiveInject(i1.UsersServiceService), i0.ɵɵdirectiveInject(i2.CookieService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ListEventsServiceService));\n};\nEsdevenimentsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EsdevenimentsComponent,\n  selectors: [[\"app-esdeveniments\"]],\n  decls: 41,\n  vars: 13,\n  consts: [[1, \"title\"], [1, \"filter\"], [\"type\", \"text\", \"placeholder\", \"Search\", 1, \"form-control\", \"me-sm-2\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"range\", \"min\", \"0\", \"max\", \"100\", \"placeholder\", \"Search\", 1, \"form-range\", 3, \"ngModel\", \"ngModelChange\"], [1, \"page\"], [1, \"select\"], [\"aria-label\", \".form-select-sm example\", \"name\", \"\", \"id\", \"\", 1, \"form-select\", \"form-select-sm\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"5\"], [\"value\", \"15\"], [\"value\", \"30\"], [1, \"table-div\"], [1, \"table\", \"table-striped\", \"table-hover\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-dark\", 3, \"pageChange\"], [1, \"abajo-izquierda\", \"table-div\"], [4, \"ngIf\"], [1, \"table-active\"], [\"class\", \"btn btn-success float-right\", \"i\", \"\", \"d\", \"buyButton\", 4, \"ngIf\"], [\"class\", \"btn btn-secondary float-right\", \"id\", \"deleteButton\", 3, \"click\", 4, \"ngIf\"], [\"i\", \"\", \"d\", \"buyButton\", 1, \"btn\", \"btn-success\", \"float-right\"], [\"id\", \"deleteButton\", 1, \"btn\", \"btn-secondary\", \"float-right\", 3, \"click\"]],\n  template: function EsdevenimentsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵtext(1, \"Events List!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3, \" Filter by name: \");\n      i0.ɵɵelementStart(4, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function EsdevenimentsComponent_Template_input_ngModelChange_4_listener($event) {\n        return ctx.filterByName = $event;\n      })(\"ngModelChange\", function EsdevenimentsComponent_Template_input_ngModelChange_4_listener() {\n        return ctx.filter();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(5, \" Filter by price:\");\n      i0.ɵɵelementStart(6, \"input\", 3);\n      i0.ɵɵlistener(\"ngModelChange\", function EsdevenimentsComponent_Template_input_ngModelChange_6_listener($event) {\n        return ctx.filterByPrice = $event;\n      })(\"ngModelChange\", function EsdevenimentsComponent_Template_input_ngModelChange_6_listener() {\n        return ctx.filter();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"p\", 4);\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"div\", 5)(10, \"p\");\n      i0.ɵɵtext(11, \"Items per page\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"select\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function EsdevenimentsComponent_Template_select_ngModelChange_12_listener($event) {\n        return ctx.itXpage = $event;\n      });\n      i0.ɵɵelementStart(13, \"option\", 7);\n      i0.ɵɵtext(14, \"5\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"option\", 8);\n      i0.ɵɵtext(16, \"15\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"option\", 9);\n      i0.ɵɵtext(18, \"30\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(19, \"div\", 10)(20, \"table\", 11)(21, \"thead\")(22, \"tr\")(23, \"th\", 12);\n      i0.ɵɵtext(24, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"th\", 12);\n      i0.ɵɵtext(26, \"Type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"th\", 12);\n      i0.ɵɵtext(28, \"Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"th\", 12);\n      i0.ɵɵtext(30, \"Price\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"th\", 12);\n      i0.ɵɵtext(32, \"Place\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(33, \"tbody\");\n      i0.ɵɵtemplate(34, EsdevenimentsComponent_tr_34_Template, 14, 7, \"tr\", 13);\n      i0.ɵɵpipe(35, \"paginate\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(36, \"div\", 4)(37, \"pagination-controls\", 14);\n      i0.ɵɵlistener(\"pageChange\", function EsdevenimentsComponent_Template_pagination_controls_pageChange_37_listener($event) {\n        return ctx.page = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(38, \"div\", 15);\n      i0.ɵɵtemplate(39, EsdevenimentsComponent_b_39_Template, 2, 1, \"b\", 16);\n      i0.ɵɵtemplate(40, EsdevenimentsComponent_b_40_Template, 2, 0, \"b\", 16);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.filterByName);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.filterByPrice);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.filterByPrice);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.itXpage);\n      i0.ɵɵadvance(22);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(35, 7, ctx.filterEvents, i0.ɵɵpureFunction2(10, _c0, ctx.itXpage, ctx.page)));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.filterEvents.length >= 1);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.filterEvents.length == 0);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.RangeValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgModel, i7.PaginationControlsComponent, i7.PaginatePipe],\n  styles: [\".title[_ngcontent-%COMP%] {\\n    margin-bottom: 20px;\\n    margin-top: 20px; \\n    text-align: center;  \\n}\\n.table-div[_ngcontent-%COMP%] {\\n    padding-right: 30px;\\n    padding-left: 30px;\\n}\\n.page[_ngcontent-%COMP%] {\\n    text-align: center;\\n    margin-top: 5px; \\n\\n}\\n.select[_ngcontent-%COMP%] {\\n    padding-left: 20px;\\n\\n}\\nb[_ngcontent-%COMP%] {\\n    font-size: 19px;\\n}\\n\\n.filter[_ngcontent-%COMP%] {\\n    margin-left: 30%;\\n    margin-right: 30%;\\n}\\nul[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%] {\\n    padding-left: 0;\\n\\n}\\n.float-right[_ngcontent-%COMP%] {\\n    float: right;\\n    margin-right: 100px;\\n\\n}\\n.abajo-izquierda[_ngcontent-%COMP%] {\\n    text-align: right;\\n    float: right;\\n    position: absolute;\\n}\\nform.form[_ngcontent-%COMP%] {\\n    margin-left: 30%;\\n    margin-right: 30%;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZXNkZXZlbmltZW50cy9lc2RldmVuaW1lbnRzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxtQkFBbUI7SUFDbkIsZ0JBQWdCO0lBQ2hCLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksbUJBQW1CO0lBQ25CLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksa0JBQWtCO0lBQ2xCLGVBQWU7O0FBRW5CO0FBQ0E7SUFDSSxrQkFBa0I7O0FBRXRCO0FBQ0E7SUFDSSxlQUFlO0FBQ25COztBQUVBO0lBQ0ksZ0JBQWdCO0lBQ2hCLGlCQUFpQjtBQUNyQjtBQUNBO0lBQ0ksZUFBZTs7QUFFbkI7QUFDQTtJQUNJLFlBQVk7SUFDWixtQkFBbUI7O0FBRXZCO0FBQ0E7SUFDSSxpQkFBaUI7SUFDakIsWUFBWTtJQUNaLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksZ0JBQWdCO0lBQ2hCLGlCQUFpQjtBQUNyQiIsInNvdXJjZXNDb250ZW50IjpbIi50aXRsZSB7XG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICBtYXJnaW4tdG9wOiAyMHB4OyBcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7ICBcbn1cbi50YWJsZS1kaXYge1xuICAgIHBhZGRpbmctcmlnaHQ6IDMwcHg7XG4gICAgcGFkZGluZy1sZWZ0OiAzMHB4O1xufVxuLnBhZ2Uge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBtYXJnaW4tdG9wOiA1cHg7IFxuXG59XG4uc2VsZWN0IHtcbiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG5cbn1cbmIge1xuICAgIGZvbnQtc2l6ZTogMTlweDtcbn1cblxuLmZpbHRlciB7XG4gICAgbWFyZ2luLWxlZnQ6IDMwJTtcbiAgICBtYXJnaW4tcmlnaHQ6IDMwJTtcbn1cbnVsIC5uZ3gtcGFnaW5hdGlvbiB7XG4gICAgcGFkZGluZy1sZWZ0OiAwO1xuXG59XG4uZmxvYXQtcmlnaHQge1xuICAgIGZsb2F0OiByaWdodDtcbiAgICBtYXJnaW4tcmlnaHQ6IDEwMHB4O1xuXG59XG4uYWJham8taXpxdWllcmRhIHtcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICBmbG9hdDogcmlnaHQ7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xufVxuZm9ybS5mb3JtIHtcbiAgICBtYXJnaW4tbGVmdDogMzAlO1xuICAgIG1hcmdpbi1yaWdodDogMzAlO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","EsdevenimentsComponent","constructor","serviceUser","cookieService","router","listeventService","ngOnInit","handleSesison","events","getEvents","myRole","getCookieRole","itXpage","filterByName","filterByPrice","filterEvents","deleteRow","element","filter","delEvent","value","name","indexOf","price","sessionStorage","getItem","setItem","window","location","reload","isLogged","checkCookieSession","navigate","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/vic/dawbio2/m06-client/UF3/my-app-2/src/app/esdeveniments/esdeveniments.component.html","/home/vic/dawbio2/m06-client/UF3/my-app-2/src/app/esdeveniments/esdeveniments.component.ts"],"sourcesContent":["<h1 class=\"title\">Events List!</h1>\n<div class=\"filter\">    \n    Filter by name: <input class=\"form-control me-sm-2\" type=\"text\" [(ngModel)]=\"filterByName\" (ngModelChange)=\"filter()\" placeholder=\"Search\">\n    Filter by price:<input class=\"form-range \"  type=\"range\" min=\"0\" max=\"100\" [(ngModel)]=\"filterByPrice\" (ngModelChange)=\"filter()\" placeholder=\"Search\">\n    <p class=\"page\">{{filterByPrice}}</p>\n</div>\n\n<div class=\"select\">\n    <p>Items per page</p>\n    <select [(ngModel)]=\"itXpage\" class=\"form-select form-select-sm\"   aria-label=\".form-select-sm example\" name=\"\" id=\"\">\n        <option value=\"5\">5</option>\n        <option value=\"15\">15</option>\n        <option value=\"30\">30</option>\n    </select>\n</div>\n<div class=\"table-div\">\n<table class=\"table table-striped table-hover\">\n    <thead>\n        <tr>\n            <th scope=\"col\" >Name</th>\n            <th scope=\"col\" >Type</th>\n            <th scope=\"col\" >Date</th>\n            <th scope=\"col\" >Price</th>\n            <th scope=\"col\" >Place</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr *ngFor=\"let event of filterEvents | paginate: { itemsPerPage: itXpage, currentPage: page}\">\n            <td  class=\"table-active\" >{{ event.name }}</td>\n            <td  class=\"table-active\" >{{ event.type }}</td>\n            <td  class=\"table-active\" >{{ event.date }}</td>\n            <td  class=\"table-active\" >{{ event.price }} €</td>\n            <td  class=\"table-active\" >{{ event.place }}\n            </td>\n            <td class=\"table-active\">\n                <button *ngIf=\"myRole == 'comprador'\" class=\"btn btn-success float-right\" i d=\"buyButton\" >Buy ticket</button>\n                <button *ngIf=\"myRole == 'admin'|| myRole == 'staff'\" class=\"btn btn-secondary float-right\" id=\"deleteButton\" (click)=\"deleteRow(event)\">Delete</button>\n\n            </td>\n        </tr>\n        </tbody>\n    </table>\n\n</div>\n<div class=\"page \">\n<pagination-controls class=\"btn btn-dark\" (pageChange)=\"page = $event\"></pagination-controls>\n</div>\n<div class=\"abajo-izquierda table-div\">\n<b *ngIf=\"filterEvents.length >= 1\">Total number of events: {{ filterEvents.length }} </b>\n<b *ngIf=\"filterEvents.length == 0\">No events found </b>\n</div>","import { Component, OnInit }   from '@angular/core';\nimport { UsersServiceService } from 'src/app/services/users-service.service';\nimport { ListEventsServiceService } from 'src/app/services/list-events-service.service';\nimport { CookieService }       from 'ngx-cookie-service';\nimport { Router } from '@angular/router';\nimport { Event }  from '../model/Esdeveniments';\nimport { trigger } from '@angular/animations';\n// Comoponente de los Eventos\n\n@Component({\n  selector: 'app-esdeveniments',\n  templateUrl: './esdeveniments.component.html',\n  styleUrls: ['./esdeveniments.component.css'],\n})\nexport class EsdevenimentsComponent implements OnInit {\n  constructor( // --> per injectar, serveis, cookies, router\n    private serviceUser: UsersServiceService,\n    private cookieService: CookieService,\n    private router: Router,\n    private listeventService: ListEventsServiceService\n  ) {}\n  \n  // Init Variables\n  isLogged!: boolean;\n  events!:   Event[];\n  page:      number = 1;\n  myRole!:   string;\n  itXpage!:  number;\n\n  filterEvents!:  Event[];\n  filterByName!: string;\n  filterByPrice!: number ;\n  ngOnInit() {\n    // Execute Handle session\n    this.handleSesison();\n    // Get events list\n    this.events = this.listeventService.getEvents()\n    \n    //Get Role\n    this.myRole = this.serviceUser.getCookieRole();\n  \n    this.itXpage = 10;\n    this.filterByName = \"\";\n    this.filterByPrice = 100;\n    this.filterEvents = this.events;\n  }\n  // Deletes row for button\n  deleteRow(element: any): void {\n    this.filterEvents = this.filterEvents.filter(delEvent => delEvent != element)    \n  }\n  \n  filter() {\n    this.filterEvents = this.events.filter(value => {\n\n      if(value.name.indexOf(this.filterByName) != -1) {\n        if(value.price <= this.filterByPrice)\n        return true;\n      }\n      return false;\n    });\n  }\n\n\n  handleSesison(): void{\n    /// HANDLE SESSION ///\n\n    // Reload page to show logout button\n    if (sessionStorage.getItem('reloaded') === null) {\n      sessionStorage.setItem('reloaded', 'true');\n      window.location.reload();\n    }\n    // If it's not logged, redirect to login\n    this.isLogged = this.serviceUser.checkCookieSession();\n    if (!this.isLogged) { \n      this.router.navigate(['/login']);\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}