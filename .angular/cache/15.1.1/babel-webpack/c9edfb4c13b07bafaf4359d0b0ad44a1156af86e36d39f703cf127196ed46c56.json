{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/users-service.service\";\nimport * as i2 from \"ngx-cookie-service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/list-events-service.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"ngx-pagination\";\nfunction EsdevenimentsComponent_tr_31_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 18);\n    i0.ɵɵtext(1, \"Buy ticket\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EsdevenimentsComponent_tr_31_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function EsdevenimentsComponent_tr_31_button_13_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const event_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.deleteRow(event_r3));\n    });\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EsdevenimentsComponent_tr_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 15);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 15);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 15);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 15);\n    i0.ɵɵtemplate(12, EsdevenimentsComponent_tr_31_button_12_Template, 2, 0, \"button\", 16);\n    i0.ɵɵtemplate(13, EsdevenimentsComponent_tr_31_button_13_Template, 2, 0, \"button\", 17);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const event_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r3.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r3.date);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(event_r3.price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", event_r3.place, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.myRole == \"comprador\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.myRole == \"admin\" || ctx_r0.myRole == \"staff\");\n  }\n}\nfunction EsdevenimentsComponent_b_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"b\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Total number of events: \", ctx_r1.events.length, \" \");\n  }\n}\nfunction EsdevenimentsComponent_b_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"b\");\n    i0.ɵɵtext(1, \"No events found \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    itemsPerPage: a0,\n    currentPage: a1\n  };\n};\n// Comoponente de los Eventos\nexport class EsdevenimentsComponent {\n  constructor(\n  // --> per injectar, serveis, cookies, router\n  serviceUser, cookieService, router, listeventService) {\n    this.serviceUser = serviceUser;\n    this.cookieService = cookieService;\n    this.router = router;\n    this.listeventService = listeventService;\n    this.page = 1;\n  }\n  ngOnInit() {\n    // Execute Handle session\n    this.handleSesison();\n    // Get events list\n    this.events = this.listeventService.getEvents();\n    //Get Role\n    this.myRole = this.serviceUser.getCookieRole();\n    this.itXpage = 10;\n    this.filterByName = \"\";\n    this.filterByPrice = 50;\n  }\n  // Deletes row for button\n  deleteRow(element) {\n    this.events = this.events.filter(delEvent => delEvent != element);\n  }\n  filter() {\n    this.filterEvents = this.events.filter(value => {\n      if (value.name.indexOf(this.filterByName.toUpperCase()) != -1) {\n        if (value.price <= this.filterByName) return true;\n      }\n      return false;\n    });\n  }\n  handleSesison() {\n    /// HANDLE SESSION ///\n    // Reload page to show logout button\n    if (sessionStorage.getItem('reloaded') === null) {\n      sessionStorage.setItem('reloaded', 'true');\n      window.location.reload();\n    }\n    // If it's not logged, redirect to login\n    this.isLogged = this.serviceUser.checkCookieSession();\n    if (!this.isLogged) {\n      this.router.navigate(['/login']);\n    }\n  }\n}\nEsdevenimentsComponent.ɵfac = function EsdevenimentsComponent_Factory(t) {\n  return new (t || EsdevenimentsComponent)(i0.ɵɵdirectiveInject(i1.UsersServiceService), i0.ɵɵdirectiveInject(i2.CookieService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ListEventsServiceService));\n};\nEsdevenimentsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EsdevenimentsComponent,\n  selectors: [[\"app-esdeveniments\"]],\n  decls: 38,\n  vars: 10,\n  consts: [[1, \"title\"], [1, \"d-flex\", \"form\"], [\"type\", \"search\", \"placeholder\", \"Search\", 1, \"form-control\", \"me-sm-2\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-secondary\", \"my-2\", \"my-sm-0\"], [1, \"select\"], [\"aria-label\", \".form-select-sm example\", \"name\", \"\", \"id\", \"\", 1, \"form-select\", \"form-select-sm\"], [\"value\", \"\"], [1, \"table-div\"], [1, \"table\", \"table-striped\", \"table-hover\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [1, \"page\"], [1, \"btn\", \"btn-dark\", 3, \"pageChange\"], [1, \"abajo-izquierda\", \"table-div\"], [4, \"ngIf\"], [1, \"table-active\"], [\"class\", \"btn btn-success float-right\", \"i\", \"\", \"d\", \"buyButton\", 4, \"ngIf\"], [\"class\", \"btn btn-secondary float-right\", \"id\", \"deleteButton\", 3, \"click\", 4, \"ngIf\"], [\"i\", \"\", \"d\", \"buyButton\", 1, \"btn\", \"btn-success\", \"float-right\"], [\"id\", \"deleteButton\", 1, \"btn\", \"btn-secondary\", \"float-right\", 3, \"click\"]],\n  template: function EsdevenimentsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵtext(1, \"Events List!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 1)(3, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function EsdevenimentsComponent_Template_input_ngModelChange_3_listener($event) {\n        return ctx.filterByName = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"button\", 3);\n      i0.ɵɵtext(5, \"Search\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"div\", 4)(7, \"p\");\n      i0.ɵɵtext(8, \"Items per page\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"select\", 5)(10, \"option\", 6);\n      i0.ɵɵtext(11, \"5\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"option\", 6);\n      i0.ɵɵtext(13, \"10\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"option\", 6);\n      i0.ɵɵtext(15, \"15\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(16, \"div\", 7)(17, \"table\", 8)(18, \"thead\")(19, \"tr\")(20, \"th\", 9);\n      i0.ɵɵtext(21, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"th\", 9);\n      i0.ɵɵtext(23, \"Type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"th\", 9);\n      i0.ɵɵtext(25, \"Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"th\", 9);\n      i0.ɵɵtext(27, \"Place\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"th\", 9);\n      i0.ɵɵtext(29, \"Price\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(30, \"tbody\");\n      i0.ɵɵtemplate(31, EsdevenimentsComponent_tr_31_Template, 14, 7, \"tr\", 10);\n      i0.ɵɵpipe(32, \"paginate\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(33, \"div\", 11)(34, \"pagination-controls\", 12);\n      i0.ɵɵlistener(\"pageChange\", function EsdevenimentsComponent_Template_pagination_controls_pageChange_34_listener($event) {\n        return ctx.page = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(35, \"div\", 13);\n      i0.ɵɵtemplate(36, EsdevenimentsComponent_b_36_Template, 2, 1, \"b\", 14);\n      i0.ɵɵtemplate(37, EsdevenimentsComponent_b_37_Template, 2, 0, \"b\", 14);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.filterByName);\n      i0.ɵɵadvance(28);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(32, 4, ctx.events, i0.ɵɵpureFunction2(7, _c0, ctx.itXpage, ctx.page)));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.events.length > 1);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.events.length == 0);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.NgModel, i6.NgForm, i7.PaginationControlsComponent, i7.PaginatePipe],\n  styles: [\".title[_ngcontent-%COMP%] {\\n    margin-bottom: 20px;\\n    margin-top: 20px; \\n    text-align: center;  \\n}\\n.table-div[_ngcontent-%COMP%] {\\n    padding-right: 30px;\\n    padding-left: 30px;\\n}\\n.page[_ngcontent-%COMP%] {\\n    text-align: center;\\n\\n}\\n.select[_ngcontent-%COMP%] {\\n    padding-left: 20px;\\n\\n}\\nb[_ngcontent-%COMP%] {\\n    font-size: 19px;\\n}\\n\\nul[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%] {\\n    padding-left: 0;\\n\\n}\\n.float-right[_ngcontent-%COMP%] {\\n    float: right;\\n    margin-right: 100px;\\n\\n}\\n.abajo-izquierda[_ngcontent-%COMP%] {\\n    text-align: right;\\n    float: right;\\n    position: absolute;\\n}\\nform.form[_ngcontent-%COMP%] {\\n    margin-left: 30%;\\n    margin-right: 30%;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZXNkZXZlbmltZW50cy9lc2RldmVuaW1lbnRzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxtQkFBbUI7SUFDbkIsZ0JBQWdCO0lBQ2hCLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksbUJBQW1CO0lBQ25CLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksa0JBQWtCOztBQUV0QjtBQUNBO0lBQ0ksa0JBQWtCOztBQUV0QjtBQUNBO0lBQ0ksZUFBZTtBQUNuQjs7QUFFQTtJQUNJLGVBQWU7O0FBRW5CO0FBQ0E7SUFDSSxZQUFZO0lBQ1osbUJBQW1COztBQUV2QjtBQUNBO0lBQ0ksaUJBQWlCO0lBQ2pCLFlBQVk7SUFDWixrQkFBa0I7QUFDdEI7QUFDQTtJQUNJLGdCQUFnQjtJQUNoQixpQkFBaUI7QUFDckIiLCJzb3VyY2VzQ29udGVudCI6WyIudGl0bGUge1xuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgbWFyZ2luLXRvcDogMjBweDsgXG4gICAgdGV4dC1hbGlnbjogY2VudGVyOyAgXG59XG4udGFibGUtZGl2IHtcbiAgICBwYWRkaW5nLXJpZ2h0OiAzMHB4O1xuICAgIHBhZGRpbmctbGVmdDogMzBweDtcbn1cbi5wYWdlIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG5cbn1cbi5zZWxlY3Qge1xuICAgIHBhZGRpbmctbGVmdDogMjBweDtcblxufVxuYiB7XG4gICAgZm9udC1zaXplOiAxOXB4O1xufVxuXG51bCAubmd4LXBhZ2luYXRpb24ge1xuICAgIHBhZGRpbmctbGVmdDogMDtcblxufVxuLmZsb2F0LXJpZ2h0IHtcbiAgICBmbG9hdDogcmlnaHQ7XG4gICAgbWFyZ2luLXJpZ2h0OiAxMDBweDtcblxufVxuLmFiYWpvLWl6cXVpZXJkYSB7XG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgZmxvYXQ6IHJpZ2h0O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbn1cbmZvcm0uZm9ybSB7XG4gICAgbWFyZ2luLWxlZnQ6IDMwJTtcbiAgICBtYXJnaW4tcmlnaHQ6IDMwJTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","EsdevenimentsComponent","constructor","serviceUser","cookieService","router","listeventService","ngOnInit","handleSesison","events","getEvents","myRole","getCookieRole","itXpage","filterByName","filterByPrice","deleteRow","element","filter","delEvent","filterEvents","value","name","indexOf","toUpperCase","price","sessionStorage","getItem","setItem","window","location","reload","isLogged","checkCookieSession","navigate","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/vic/dawbio2/m06-client/UF3/my-app-2/src/app/esdeveniments/esdeveniments.component.html","/home/vic/dawbio2/m06-client/UF3/my-app-2/src/app/esdeveniments/esdeveniments.component.ts"],"sourcesContent":["<h1 class=\"title\">Events List!</h1>\n<form class=\"d-flex form\">\n\n    <input class=\"form-control me-sm-2\" type=\"search\" [(ngModel)]=\"filterByName\" placeholder=\"Search\">\n    <button class=\"btn btn-secondary my-2 my-sm-0\" type=\"submit\">Search</button>\n    \n</form>\n<div class=\"select\">\n    <p>Items per page</p>\n    <select class=\"form-select form-select-sm\"  aria-label=\".form-select-sm example\" name=\"\" id=\"\">\n        <option value=\"\">5</option>\n        <option value=\"\">10</option>\n        <option value=\"\">15</option>\n    </select>\n</div>\n<div class=\"table-div\">\n<table class=\"table table-striped table-hover\">\n    <thead>\n        <tr>\n            <th scope=\"col\" >Name</th>\n            <th scope=\"col\" >Type</th>\n            <th scope=\"col\" >Date</th>\n            <th scope=\"col\" >Place</th>\n            <th scope=\"col\" >Price</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr *ngFor=\"let event of events | paginate: { itemsPerPage: itXpage, currentPage: page}\">\n            <td  class=\"table-active\" >{{ event.name }}</td>\n            <td  class=\"table-active\" >{{ event.type }}</td>\n            <td  class=\"table-active\" >{{ event.date }}</td>\n            <td  class=\"table-active\" >{{ event.price }}</td>\n            <td  class=\"table-active\" >{{ event.place }}\n            </td>\n            <td class=\"table-active\">\n                <button *ngIf=\"myRole == 'comprador'\" class=\"btn btn-success float-right\" i d=\"buyButton\" >Buy ticket</button>\n                <button *ngIf=\"myRole == 'admin'|| myRole == 'staff'\" class=\"btn btn-secondary float-right\" id=\"deleteButton\" (click)=\"deleteRow(event)\">Delete</button>\n\n            </td>\n        </tr>\n        </tbody>\n    </table>\n    <!-- <div>\n        <tr *ngFor=\"let events of filterEventsByName()\">\n            <td>{{ eventsResult.name }}</td>\n            ...\n        </tr>\n    </div> -->\n</div>\n<div class=\"page \">\n<pagination-controls class=\"btn btn-dark\" (pageChange)=\"page = $event\"></pagination-controls>\n</div>\n<div class=\"abajo-izquierda table-div\">\n<b *ngIf=\"events.length > 1\">Total number of events: {{ events.length }} </b>\n<b *ngIf=\"events.length == 0\">No events found </b>\n</div>","import { Component, OnInit }   from '@angular/core';\nimport { UsersServiceService } from 'src/app/services/users-service.service';\nimport { ListEventsServiceService } from 'src/app/services/list-events-service.service';\nimport { CookieService }       from 'ngx-cookie-service';\nimport { Router } from '@angular/router';\nimport { Event }  from '../model/Esdeveniments';\nimport { trigger } from '@angular/animations';\n// Comoponente de los Eventos\n\n@Component({\n  selector: 'app-esdeveniments',\n  templateUrl: './esdeveniments.component.html',\n  styleUrls: ['./esdeveniments.component.css'],\n})\nexport class EsdevenimentsComponent implements OnInit {\n  constructor( // --> per injectar, serveis, cookies, router\n    private serviceUser: UsersServiceService,\n    private cookieService: CookieService,\n    private router: Router,\n    private listeventService: ListEventsServiceService\n  ) {}\n  \n  // Init Variables\n  isLogged!: boolean;\n  events!:   Event[];\n  page:      number = 1;\n  myRole!:   string;\n  itXpage!:  number;\n\n  filterEvents!:  Event[];\n  filterByName!:  string;\n  filterByPrice!: number ;\n  ngOnInit() {\n    // Execute Handle session\n    this.handleSesison();\n    // Get events list\n    this.events = this.listeventService.getEvents()\n    \n    //Get Role\n    this.myRole = this.serviceUser.getCookieRole();\n  \n    this.itXpage = 10;\n    this.filterByName = \"\";\n    this.filterByPrice = 50;\n\n  }\n  // Deletes row for button\n  deleteRow(element: any): void {\n    this.events = this.events.filter(delEvent => delEvent != element)    \n  }\n  \n  filter() {\n    this.filterEvents = this.events.filter(value=>{\n\n      if(value.name.indexOf(this.filterByName.toUpperCase()) != -1) {\n        if(value.price <= this.filterByName)\n        return true;\n      }\n      return false;\n    });\n  }\n\n\n  handleSesison(): void{\n    /// HANDLE SESSION ///\n\n    // Reload page to show logout button\n    if (sessionStorage.getItem('reloaded') === null) {\n      sessionStorage.setItem('reloaded', 'true');\n      window.location.reload();\n    }\n    // If it's not logged, redirect to login\n    this.isLogged = this.serviceUser.checkCookieSession();\n    if (!this.isLogged) { \n      this.router.navigate(['/login']);\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}